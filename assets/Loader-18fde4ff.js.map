{"version":3,"file":"Loader-18fde4ff.js","sources":["../../src/components/Loader/AnimatedPath.tsx","../../src/components/Loader/Loader.styles.ts","../../src/components/Loader/stylesBuilder/stylesBuilder.ts","../../src/components/Loader/Loader.tsx"],"sourcesContent":["import styled, { keyframes } from '@xstyled/styled-components';\n\nimport { tet } from '@/tetrisly';\n\nconst animationCircle = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst animationBar = keyframes`\n  0% {\n    transform: translate(-50%, 0px);\n  }\n  100% {\n    transform: translate(150%, 0px);\n  }\n`;\n\nexport const AnimatedPath = styled(tet.path)<{\n  shape: string;\n}>`\n  aspect-ratio: 1;\n  transform-origin: center center;\n  animation: ${({ shape }) =>\n      shape === 'circle' ? animationCircle : animationBar}\n    1.4s infinite linear;\n`;\n","import { SystemProps } from '@xstyled/styled-components';\nimport { SvgProperties } from 'csstype';\n\nimport type { LoaderAppearance, LoaderShape, LoaderSize } from './types';\n\nimport { BaseProps } from '@/types/BaseProps';\n\nexport type LoaderConfig = {\n  size: Record<\n    LoaderShape,\n    Record<LoaderSize, SystemProps & Pick<SvgProperties, 'strokeWidth'>>\n  >;\n  appearance: Record<\n    LoaderAppearance,\n    Record<'base' | 'progress', SystemProps>\n  >;\n  svg: SystemProps;\n  progress: SystemProps & Pick<SvgProperties, 'strokeLinecap'>;\n} & BaseProps;\n\nexport const defaultConfig = {\n  size: {\n    circle: {\n      large: {\n        w: 48,\n        h: 48,\n        strokeWidth: '2',\n      },\n      medium: {\n        w: 32,\n        h: 32,\n        strokeWidth: '2',\n      },\n      small: {\n        w: 20,\n        h: 20,\n        strokeWidth: '2',\n      },\n    },\n    bar: {\n      large: {\n        w: 128,\n        h: 8,\n        strokeWidth: '8',\n      },\n      medium: {\n        w: 128,\n        h: 6,\n        strokeWidth: '6',\n      },\n      small: {\n        w: 128,\n        h: 4,\n        strokeWidth: '4',\n      },\n    },\n  },\n  appearance: {\n    primary: {\n      base: {\n        stroke: 'interaction-neutral-subtle-normal',\n      },\n      progress: {\n        stroke: 'interaction-default-normal',\n      },\n    },\n    inverted: {\n      base: {\n        stroke: 'interaction-inverted-normal',\n      },\n      progress: {\n        stroke: 'interaction-default-normal',\n      },\n    },\n    white: {\n      base: {\n        stroke: 'interaction-inverted-normal',\n        opacity: 0.4,\n      },\n      progress: {\n        stroke: 'interaction-inverted-normal',\n      },\n    },\n    greyscale: {\n      base: {\n        stroke: 'interaction-neutral-subtle-normal',\n      },\n      progress: {\n        stroke: 'interaction-neutral-normal',\n      },\n    },\n  },\n  svg: {\n    fill: 'none',\n    borderRadius: 'large',\n  },\n  progress: {\n    strokeLinecap: 'round',\n  },\n} satisfies LoaderConfig;\n","import { LoaderProps } from '../Loader.props';\nimport { defaultConfig } from '../Loader.styles';\n\nimport { mergeConfigWithCustom } from '@/services';\n\ntype StylesBuilderProps = Omit<Required<LoaderProps>, 'custom' | 'progress'> & {\n  custom: LoaderProps['custom'];\n  progress: LoaderProps['progress'];\n};\n\nfunction polarToCartesian(\n  centerX: number,\n  centerY: number,\n  radius: number,\n  angleInDegrees: number,\n) {\n  const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0;\n\n  return {\n    x: centerX + radius * Math.cos(angleInRadians),\n    y: centerY + radius * Math.sin(angleInRadians),\n  };\n}\n\nfunction describeArc(\n  x: number,\n  y: number,\n  radius: number,\n  startAngle: number,\n  endAngle: number,\n) {\n  const start = polarToCartesian(x, y, radius, endAngle);\n  const end = polarToCartesian(x, y, radius, startAngle);\n  const largeArcFlag = endAngle - startAngle <= 180 ? '0' : '1';\n\n  const d = [\n    'M',\n    start.x,\n    start.y,\n    'A',\n    radius,\n    radius,\n    0,\n    largeArcFlag,\n    0,\n    end.x,\n    end.y,\n  ].join(' ');\n\n  return d;\n}\n\nexport const stylesBuilder = ({ custom, ...props }: StylesBuilderProps) => {\n  const config = mergeConfigWithCustom({ defaultConfig, custom });\n\n  const size = config.size[props.shape][props.size];\n  const { w, h, ...restSizeStyles } = size;\n  const svgSizeStyles = {\n    ...size,\n    viewBox: `0 0 ${w} ${h}`,\n  };\n\n  const progress = Math.min(Math.max(props.progress ?? 0.4, 0), 1);\n\n  const baseSizeStyles = {\n    d:\n      props.shape === 'circle'\n        ? describeArc(w / 2, w / 2, w / 2 - 3, 0, 359.99)\n        : `M 0 ${h / 2} H ${w}`,\n  };\n\n  const progressSizeStyles = {\n    d:\n      props.shape === 'circle'\n        ? describeArc(w / 2, w / 2, w / 2 - 3, 0, 359.99 * progress)\n        : `M 0 ${h / 2} H ${progress * w}`,\n  };\n\n  const svgStyles = {\n    ...svgSizeStyles,\n    ...config.svg,\n  };\n\n  const baseStyles = {\n    ...baseSizeStyles,\n    ...restSizeStyles,\n    ...config.appearance[props.appearance].base,\n    ...config.progress,\n  };\n\n  const progressStyles = {\n    ...progressSizeStyles,\n    ...restSizeStyles,\n    ...config.appearance[props.appearance].progress,\n    ...config.progress,\n  };\n\n  return { svgStyles, baseStyles, progressStyles };\n};\n","import { MarginProps } from '@xstyled/styled-components';\nimport { useMemo } from 'react';\n\nimport { AnimatedPath } from './AnimatedPath';\nimport { LoaderProps } from './Loader.props';\nimport { stylesBuilder } from './stylesBuilder';\n\nimport { tet } from '@/tetrisly';\n\nexport const Loader = ({\n  appearance = 'primary',\n  progress,\n  shape,\n  size = 'medium',\n  custom,\n}: LoaderProps & MarginProps) => {\n  const { svgStyles, baseStyles, progressStyles } = useMemo(\n    () =>\n      stylesBuilder({\n        appearance,\n        progress,\n        shape,\n        size,\n        custom,\n      }),\n    [appearance, progress, shape, size, custom],\n  );\n  return (\n    <tet.svg\n      {...svgStyles}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      data-testid=\"loader\"\n    >\n      <tet.path {...baseStyles} data-testid=\"loader-base\" />\n      {progress === undefined ? (\n        <AnimatedPath\n          shape={shape}\n          {...progressStyles}\n          data-testid=\"loader-progress\"\n        />\n      ) : (\n        <tet.path {...progressStyles} data-testid=\"loader-progress\" />\n      )}\n    </tet.svg>\n  );\n};\n"],"names":["animationCircle","keyframes","animationBar","AnimatedPath","styled","tet","shape","defaultConfig","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","describeArc","x","y","startAngle","endAngle","start","end","largeArcFlag","stylesBuilder","custom","props","config","mergeConfigWithCustom","size","w","h","restSizeStyles","svgSizeStyles","progress","baseSizeStyles","progressSizeStyles","svgStyles","baseStyles","progressStyles","Loader","appearance","useMemo","jsxs","jsx"],"mappings":"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"}