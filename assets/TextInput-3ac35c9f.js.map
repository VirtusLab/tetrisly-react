{"version":3,"file":"TextInput-3ac35c9f.js","sources":["../../src/services/extractMarginProps/extractMarginProps.ts","../../src/components/TextInput/TextInput.style.ts","../../src/components/TextInput/TextInput.tsx"],"sourcesContent":["/**\n * Function extracts all spacing props (ex. ''m', 'ml', 'mr' etc.), returns array  with space props and rest objects\n */\nimport {\n  MarginBottomProps,\n  MarginLeftProps,\n  MarginProps,\n  MarginRightProps,\n  MarginTopProps,\n  MarginXProps,\n  MarginYProps,\n} from '@xstyled/styled-components';\n\ninterface MarginsProps\n  extends MarginProps,\n    MarginLeftProps,\n    MarginBottomProps,\n    MarginTopProps,\n    MarginRightProps,\n    MarginXProps,\n    MarginYProps {}\n\nconst marginPropsKeys: (keyof MarginsProps)[] = [\n  'm',\n  'margin',\n  'mt',\n  'marginTop',\n  'mr',\n  'marginRight',\n  'mb',\n  'marginBottom',\n  'ml',\n  'marginLeft',\n  'mx',\n  'my',\n];\n\ntype OmitMarginProps<T> = Omit<\n  T,\n  | 'm'\n  | 'margin'\n  | 'mt'\n  | 'marginTop'\n  | 'mr'\n  | 'marginRight'\n  | 'mb'\n  | 'marginBottom'\n  | 'ml'\n  | 'marginLeft'\n  | 'mx'\n  | 'my'\n>;\n\nexport const extractMarginProps = <T extends object = object>(\n  props: T,\n): [MarginsProps, OmitMarginProps<T>] => {\n  if (!(props instanceof Object)) return [{}, {} as T];\n\n  const entries = Object.entries(props) as [keyof MarginProps, object][];\n  const [marginsProps, restProps] = entries.reduce(\n    ([margins, rest], [key, value]) => {\n      if (marginPropsKeys.includes(key)) {\n        return [{ ...margins, [key]: value }, rest];\n      }\n      return [margins, { ...rest, [key]: value }];\n    },\n    [{} as MarginProps, {} as OmitMarginProps<T>],\n  );\n\n  return [marginsProps, restProps];\n};\n","import { BaseProps } from '@/types/BaseProps';\n\nexport type TextInputConfig = {\n  innerComponents: Record<'input' | 'icon' | 'text' | 'clearButton', BaseProps>;\n  spacing:\n    | Record<\n        'beforeComponent',\n        Record<'Icon' | 'Avatar' | 'Prefix' | 'Dropdown', BaseProps>\n      >\n    | Record<\n        'afterComponent',\n        Record<\n          'Icon' | 'Sufix' | 'Button' | 'IconButton' | 'Dropdown',\n          BaseProps\n        >\n      >;\n} & BaseProps;\n\nexport const defaultConfig = {\n  display: 'flex',\n  alignItems: 'center',\n  h: 'medium',\n  padding: 'component-padding-small component-padding-large',\n  flexShrink: 0,\n  ring: '100',\n  ringColor: {\n    _: 'interaction-border-neutral-normal',\n    hover: 'interaction-border-hover',\n    focus: 'interaction-focus-default',\n    alert: 'interaction-border-alert',\n  },\n  borderRadius: 'large',\n  opacity: {\n    disabled: 'disabled',\n  },\n  outlineStyle: {\n    focusWithin: 'solid',\n  },\n  outlineColor: {\n    focusWithin: 'interaction-focus-default',\n  },\n  outlineWidth: {\n    focusWithin: 'focus',\n  },\n  outlineOffset: {\n    alert: 'focus',\n  },\n  transition: true,\n  transitionDuration: 50,\n  cursor: 'text',\n  pointerEvents: {\n    disabled: 'none',\n  },\n  innerComponents: {\n    input: {\n      w: '100%',\n      h: '100%',\n      outline: 'none',\n      text: 'body-medium',\n      color: {\n        placeholder: 'content-tertiary',\n      },\n      backgroundColor: 'interaction-background-formField',\n    },\n    icon: {\n      color: 'content-secondary',\n    },\n    text: {\n      text: 'body-medium',\n      color: 'content-secondary',\n    },\n    clearButton: {\n      marginLeft: 'component-gap-small',\n    },\n  },\n  spacing: {\n    beforeComponent: {\n      Icon: {\n        marginLeft: 'component-padding-medium',\n        marginRight: 'component-padding-small',\n      },\n      Avatar: {\n        margin: '0 component-padding-small',\n      },\n      Prefix: {\n        margin: '0 component-padding-large',\n      },\n      Dropdown: {\n        marginLeft: 'component-padding-xSmall',\n        marginRight: 'component-padding-small',\n      },\n    },\n    afterComponent: {\n      Icon: {\n        marginLeft: 'component-padding-small',\n        marginRight: 'component-padding-large',\n      },\n      Sufix: {\n        marginLeft: 'component-padding-small',\n        marginRight: 'component-padding-large',\n      },\n      Button: {\n        marginLeft: 'component-padding-small',\n        marginRight: 'component-padding-xSmall',\n      },\n      IconButton: {\n        marginLeft: 'component-padding-small',\n        marginRight: 'component-padding-xSmall',\n      },\n      Dropdown: {\n        marginLeft: 'component-padding-small',\n        marginRight: 'component-padding-xSmall',\n      },\n    },\n  },\n} satisfies TextInputConfig;\n","import { Icon } from '@virtuslab/tetrisly-icons';\nimport {\n  forwardRef,\n  useRef,\n  useCallback,\n  useState,\n  ChangeEventHandler,\n  MouseEventHandler,\n  ChangeEvent,\n} from 'react';\n\nimport { TextInputProps } from './TextInput.props';\nimport { defaultConfig } from './TextInput.style';\nimport { Button } from '../Button';\nimport { IconButton } from '../IconButton';\n\nimport { mergeConfigWithCustom } from '@/services';\nimport { extractMarginProps } from '@/services/extractMarginProps';\nimport { tet } from '@/tetrisly';\nimport { MarginProps } from '@/types/MarginProps';\n\nexport const TextInput = forwardRef<\n  HTMLInputElement,\n  TextInputProps & MarginProps\n>(\n  (\n    {\n      type = 'text',\n      beforeComponent,\n      afterComponent,\n      state,\n      hasClearButton,\n      custom,\n      value,\n      onChange,\n      ...rest\n    },\n    inputRef,\n  ) => {\n    const [innerValue, setInnerValue] = useState('');\n    const [marginProps, inputProps] = extractMarginProps<\n      TextInputProps & MarginProps\n    >(rest);\n\n    const {\n      innerComponents: {\n        input: inputStyles,\n        icon: iconStyles,\n        text: textStyles,\n        clearButton: clearButtonStyles,\n      },\n      spacing,\n      ...defaultStyles\n    } = mergeConfigWithCustom({ defaultConfig, custom });\n\n    const containerRef = useRef<HTMLInputElement | null>(null);\n\n    const handleContainerClick: MouseEventHandler = useCallback(\n      (e) => {\n        if (e.target === containerRef.current) {\n          const input = containerRef.current?.querySelector('input');\n\n          if (input) input.focus();\n        }\n      },\n      [containerRef],\n    );\n\n    const handleOnChange: ChangeEventHandler<HTMLInputElement> = useCallback(\n      (e) => {\n        setInnerValue(e.target.value);\n        onChange?.(e);\n      },\n      [onChange],\n    );\n\n    const handleOnClear: MouseEventHandler<HTMLButtonElement> =\n      useCallback(() => {\n        setInnerValue('');\n        onChange?.({ target: { value: '' } } as ChangeEvent<HTMLInputElement>);\n      }, [onChange]);\n\n    return (\n      <tet.div\n        ref={containerRef}\n        onClick={handleContainerClick}\n        {...defaultStyles}\n        pl={!!beforeComponent && '0'}\n        pr={!!afterComponent && '0'}\n        {...marginProps}\n        data-state={state}\n        data-testid=\"text-input\"\n      >\n        {!!beforeComponent && (\n          <tet.span\n            {...spacing.beforeComponent[beforeComponent.type]}\n            data-testid=\"text-input-before-component\"\n          >\n            {beforeComponent.type === 'Icon' && (\n              <tet.span {...iconStyles}>\n                <Icon {...beforeComponent.props} />\n              </tet.span>\n            )}\n            {beforeComponent.type === 'Prefix' && (\n              <tet.span {...textStyles}>{beforeComponent.props.text}</tet.span>\n            )}\n            {beforeComponent.type === 'Dropdown' && (\n              <Button\n                size=\"small\"\n                variant=\"ghost\"\n                label={beforeComponent.props.label}\n                dropdownIndicator\n              />\n            )}\n          </tet.span>\n        )}\n        <tet.input\n          {...inputStyles}\n          value={value || innerValue}\n          onChange={handleOnChange}\n          {...inputProps}\n          type={type}\n          disabled={state === 'disabled'}\n          ref={inputRef}\n          data-testid=\"text-input-input\"\n        />\n        {!!hasClearButton && (value || innerValue) && (\n          <IconButton\n            variant=\"bare\"\n            icon=\"20-close\"\n            onClick={handleOnClear}\n            {...clearButtonStyles}\n            data-testid=\"text-input-clear-button\"\n          />\n        )}\n        {!!afterComponent && (\n          <tet.span\n            {...spacing.afterComponent[afterComponent.type]}\n            data-testid=\"text-input-after-component\"\n          >\n            {afterComponent.type === 'Icon' && (\n              <tet.span {...iconStyles}>\n                <Icon {...afterComponent.props} />\n              </tet.span>\n            )}\n            {afterComponent.type === 'IconButton' && (\n              <IconButton\n                variant=\"ghost\"\n                size=\"small\"\n                {...afterComponent.props}\n              />\n            )}\n            {afterComponent.type === 'Sufix' && (\n              <tet.span {...textStyles}>{afterComponent.props.text}</tet.span>\n            )}\n            {afterComponent.type === 'Button' && (\n              <Button size=\"small\" variant=\"ghost\" label=\"Label\" />\n            )}\n            {afterComponent.type === 'Dropdown' && (\n              <Button\n                size=\"small\"\n                variant=\"ghost\"\n                label={afterComponent.props.label}\n                dropdownIndicator\n              />\n            )}\n          </tet.span>\n        )}\n      </tet.div>\n    );\n  },\n);\n"],"names":["marginPropsKeys","extractMarginProps","props","entries","marginsProps","restProps","margins","rest","key","value","defaultConfig","TextInput","forwardRef","type","beforeComponent","afterComponent","state","hasClearButton","custom","onChange","inputRef","innerValue","setInnerValue","useState","marginProps","inputProps","inputStyles","iconStyles","textStyles","clearButtonStyles","spacing","defaultStyles","mergeConfigWithCustom","containerRef","useRef","handleContainerClick","useCallback","e","input","_a","handleOnChange","handleOnClear","jsxs","tet","jsx","Icon","Button","IconButton"],"mappings":"mSAsBA,MAAMA,EAA0C,CAC9C,IACA,SACA,KACA,YACA,KACA,cACA,KACA,eACA,KACA,aACA,KACA,IACF,EAkBaC,EACXC,GACuC,CACvC,GAAI,EAAEA,aAAiB,QAAS,MAAO,CAAC,CAAA,EAAI,CAAA,CAAO,EAE7C,MAAAC,EAAU,OAAO,QAAQD,CAAK,EAC9B,CAACE,EAAcC,CAAS,EAAIF,EAAQ,OACxC,CAAC,CAACG,EAASC,CAAI,EAAG,CAACC,EAAKC,CAAK,IACvBT,EAAgB,SAASQ,CAAG,EACvB,CAAC,CAAE,GAAGF,EAAS,CAACE,CAAG,EAAGC,CAAM,EAAGF,CAAI,EAErC,CAACD,EAAS,CAAE,GAAGC,EAAM,CAACC,CAAG,EAAGC,CAAA,CAAO,EAE5C,CAAC,CAAA,EAAmB,CAAA,CAAwB,CAAA,EAGvC,MAAA,CAACL,EAAcC,CAAS,CACjC,ECpDaK,EAAgB,CAC3B,QAAS,OACT,WAAY,SACZ,EAAG,SACH,QAAS,kDACT,WAAY,EACZ,KAAM,MACN,UAAW,CACT,EAAG,oCACH,MAAO,2BACP,MAAO,4BACP,MAAO,0BACT,EACA,aAAc,QACd,QAAS,CACP,SAAU,UACZ,EACA,aAAc,CACZ,YAAa,OACf,EACA,aAAc,CACZ,YAAa,2BACf,EACA,aAAc,CACZ,YAAa,OACf,EACA,cAAe,CACb,MAAO,OACT,EACA,WAAY,GACZ,mBAAoB,GACpB,OAAQ,OACR,cAAe,CACb,SAAU,MACZ,EACA,gBAAiB,CACf,MAAO,CACL,EAAG,OACH,EAAG,OACH,QAAS,OACT,KAAM,cACN,MAAO,CACL,YAAa,kBACf,EACA,gBAAiB,kCACnB,EACA,KAAM,CACJ,MAAO,mBACT,EACA,KAAM,CACJ,KAAM,cACN,MAAO,mBACT,EACA,YAAa,CACX,WAAY,qBACd,CACF,EACA,QAAS,CACP,gBAAiB,CACf,KAAM,CACJ,WAAY,2BACZ,YAAa,yBACf,EACA,OAAQ,CACN,OAAQ,2BACV,EACA,OAAQ,CACN,OAAQ,2BACV,EACA,SAAU,CACR,WAAY,2BACZ,YAAa,yBACf,CACF,EACA,eAAgB,CACd,KAAM,CACJ,WAAY,0BACZ,YAAa,yBACf,EACA,MAAO,CACL,WAAY,0BACZ,YAAa,yBACf,EACA,OAAQ,CACN,WAAY,0BACZ,YAAa,0BACf,EACA,WAAY,CACV,WAAY,0BACZ,YAAa,0BACf,EACA,SAAU,CACR,WAAY,0BACZ,YAAa,0BACf,CACF,CACF,CACF,EC9FOC,EAAAC,EAAA,WAAkB,CAAA,CAKrB,KAAAC,EAAA,OACS,gBAAAC,EACP,eAAAC,EACA,MAAAC,EACA,eAAAC,EACA,OAAAC,EACA,MAAAT,EACA,SAAAU,EACA,GAAAZ,CACG,EAAAa,IAAA,CAIL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAxB,EAAAM,CAAA,EAIA,CAAM,gBAAA,CACa,MAAAmB,EACR,KAAAC,EACD,KAAAC,EACA,YAAAC,CACO,EACf,QAAAC,EACA,GAAAC,CACG,EAAAC,EAAA,CAAA,cAAAtB,EAAA,OAAAQ,CAAA,CAAA,EAGLe,EAAAC,SAAA,IAAA,EAEAC,EAAAC,EAAA,YAAgDC,GAAA,OAE5C,GAAAA,EAAA,SAAAJ,EAAA,QAAA,CACE,MAAAK,GAAAC,EAAAN,EAAA,UAAA,YAAAM,EAAA,cAAA,SAEAD,GAAWA,EAAA,MAAA,CAAY,CACzB,EACF,CAAAL,CAAA,CACa,EAGfO,EAAAJ,EAAA,YAA6DC,GAAA,CAEzDf,EAAAe,EAAA,OAAA,KAAA,EACAlB,GAAA,MAAAA,EAAAkB,EAAY,EACd,CAAAlB,CAAA,CACS,EAGXsB,EAAAL,EAAAA,YAAA,IAAA,CAEId,EAAA,EAAA,EACAH,GAAA,MAAAA,EAAA,CAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAqE,EAAA,CAAAA,CAAA,CAAA,EAGzE,OAAAuB,EAAA,KACEC,EAAA,IAAK,CAAJ,IAAAV,EACM,QAAAE,EACI,GAAAJ,EACL,GAAA,CAAA,CAAAjB,GAAA,IACqB,GAAA,CAAA,CAAAC,GAAA,IACD,GAAAS,EACpB,aAAAR,EACQ,cAAA,aACA,SAAA,CAEX,CAAA,CAAAF,GAAA4B,EAAA,KACCC,EAAA,KAAK,CAAJ,GAAAb,EAAA,gBAAAhB,EAAA,IAAA,EACiD,cAAA,8BACpC,SAAA,CAEXA,EAAA,OAAA,QAAA8B,EAAA,IAAAD,EAAA,KAAA,CAAA,GAAAhB,EAAA,SAAAiB,EAAAA,IAAAC,EAAA,CAAA,GAAA/B,EAAA,KAAA,CAAA,EAAA,EAGCA,EAAA,OAAA,UAAA8B,EAAA,IAAAD,EAAA,KAAA,CAAA,GAAAf,EAAA,SAAAd,EAAA,MAAA,IAAA,CAAA,EAGsDA,EAAA,OAAA,YAAA8B,EAAA,IAGtDE,EAAC,CAAA,KAAA,QACM,QAAA,QACG,MAAAhC,EAAA,MAAA,MACqB,kBAAA,EACZ,CAAA,CACnB,CAAA,CAAA,EAEJ8B,EAAA,IAEFD,EAAA,MAAK,CAAJ,GAAAjB,EACK,MAAAjB,GAAAY,EACY,SAAAmB,EACN,GAAAf,EACN,KAAAZ,EACJ,SAAAG,IAAA,WACoB,IAAAI,EACf,cAAA,kBACO,CAAA,EACd,CAAA,CAAAH,IAAAR,GAAAY,IAAAuB,EAAA,IAEEG,EAAC,CAAA,QAAA,OACS,KAAA,WACH,QAAAN,EACI,GAAAZ,EACL,cAAA,yBACQ,CAAA,EACd,CAAA,CAAAd,GAAA2B,EAAA,KAGAC,EAAA,KAAK,CAAJ,GAAAb,EAAA,eAAAf,EAAA,IAAA,EAC+C,cAAA,6BAClC,SAAA,CAEXA,EAAA,OAAA,QAAA6B,EAAA,IAAAD,EAAA,KAAA,CAAA,GAAAhB,EAAA,SAAAiB,EAAAA,IAAAC,EAAA,CAAA,GAAA9B,EAAA,KAAA,CAAA,EAAA,EAGCA,EAAA,OAAA,cAAA6B,EAAA,IAGAG,EAAC,CAAA,QAAA,QACS,KAAA,QACH,GAAAhC,EAAA,KACc,CAAA,EACrBA,EAAA,OAAA,SAAA6B,EAAA,IAAAD,EAAA,KAAA,CAAA,GAAAf,EAAA,SAAAb,EAAA,MAAA,IAAA,CAAA,EAGqDA,EAAA,OAAA,UAAA6B,EAAAA,IAAAE,EAAA,CAAA,KAAA,QAAA,QAAA,QAAA,MAAA,OAAA,CAAA,EAGF/B,EAAA,OAAA,YAAA6B,EAAA,IAGnDE,EAAC,CAAA,KAAA,QACM,QAAA,QACG,MAAA/B,EAAA,MAAA,MACoB,kBAAA,EACX,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAGN"}