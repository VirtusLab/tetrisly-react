{"version":3,"file":"Tag.stories-80a82a60.js","sources":["../../src/components/Tag/Tag.styles.ts","../../src/components/Tag/stylesBuilder/stylesBuilder.ts","../../src/components/Tag/Tag.tsx","../../src/docs-components/TagDocs.tsx"],"sourcesContent":["import type { BaseProps } from '@/types/BaseProps';\n\nexport type TagConfig = {\n  hasOnClick?: BaseProps;\n  innerElements?: {\n    label: BaseProps;\n    closeButton?: BaseProps;\n    beforeComponent?: {\n      avatar?: BaseProps;\n    };\n  };\n} & BaseProps;\n\nconst backgroundColor = {\n  hover: '$color-interaction-neutral-subtle-hover',\n  active: '$color-interaction-neutral-subtle-active',\n  focus: '$color-interaction-neutral-subtle-normal',\n};\n\nexport const defaultConfig = {\n  display: 'inline-flex',\n  h: '$size-xSmall',\n  alignItems: 'center',\n  borderRadius: '$border-radius-medium',\n  backgroundColor: '$color-interaction-neutral-subtle-normal',\n  opacity: {\n    disabled: '$opacity-disabled',\n  },\n  cursor: 'default',\n  outlineColor: {\n    focus: '$color-interaction-focus-default',\n  },\n  transitionDuration: 50,\n  color: '$color-content-primary',\n  hasOnClick: {\n    backgroundColor: {\n      _: '$color-interaction-neutral-subtle-normal',\n      disabled: '$color-interaction-neutral-subtle-normal',\n      selected: {\n        _: '$color-interaction-neutral-subtle-selected',\n        ...backgroundColor,\n      },\n      ...backgroundColor,\n    },\n    cursor: {\n      _: 'pointer',\n      disabled: 'default',\n    },\n  },\n  innerElements: {\n    label: {\n      mx: '$space-component-padding-small',\n      text: '$typo-body-medium',\n    },\n    closeButton: {\n      mr: '$space-component-padding-xSmall',\n      h: '$size-2xSmall',\n      w: '$size-2xSmall',\n      opacity: {\n        disabled: '$opacity-100',\n      },\n    },\n    beforeComponent: {\n      avatar: {\n        ml: '$space-component-padding-2xSmall',\n      },\n    },\n  },\n} satisfies TagConfig;\n","import type { TagProps } from '../Tag.props';\nimport { defaultConfig } from '../Tag.styles';\n\nimport { mergeConfigWithCustom } from '@/services';\nimport type { BaseProps } from '@/types/BaseProps';\n\ntype TagStylesBuilder = {\n  container: BaseProps;\n  label: BaseProps;\n  avatar: BaseProps;\n  closeButton: BaseProps;\n};\nexport const stylesBuilder = (\n  custom: TagProps['custom'],\n  hasOnClick?: boolean,\n): TagStylesBuilder => {\n  const {\n    hasOnClick: hasOnClickStyles,\n    innerElements: {\n      label,\n      closeButton,\n      beforeComponent: { avatar },\n    },\n    ...container\n  } = mergeConfigWithCustom({ defaultConfig, custom });\n\n  return {\n    container: {\n      ...container,\n      ...(hasOnClick && hasOnClickStyles),\n    },\n    label,\n    avatar,\n    closeButton,\n  };\n};\n","import {\n  FC,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useCallback,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { stylesBuilder } from './stylesBuilder';\nimport { TagProps } from './Tag.props';\nimport { Avatar } from '../Avatar';\nimport { IconButton } from '../IconButton';\n\nimport { tet } from '@/tetrisly';\nimport { MarginProps } from '@/types';\n\nconst KEYBOARD_KEYS = {\n  Enter: 'Enter',\n  Space: ' ',\n};\n\nexport const Tag: FC<TagProps & MarginProps> = ({\n  label,\n  state,\n  beforeComponent,\n  onClick,\n  onCloseClick,\n  custom,\n  ...restProps\n}) => {\n  const hasCloseButton = !!onCloseClick;\n  const hasOnClick = !!onClick;\n  const styles = useMemo(\n    () => stylesBuilder(custom, hasOnClick),\n    [custom, hasOnClick],\n  );\n\n  const containerRef = useRef<HTMLSpanElement | null>(null);\n  const handleOnKeyDown: KeyboardEventHandler<HTMLSpanElement> = useCallback(\n    (e) => {\n      if (\n        e.target === containerRef.current &&\n        (e.key === KEYBOARD_KEYS.Enter || e.key === KEYBOARD_KEYS.Space)\n      ) {\n        onClick?.(e);\n      }\n    },\n    [containerRef, onClick],\n  );\n\n  const handleOnCloseClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    (e) => {\n      onCloseClick?.(e);\n      e.stopPropagation();\n    },\n    [onCloseClick],\n  );\n\n  return (\n    <tet.span\n      tabIndex={0}\n      ref={containerRef}\n      onClick={onClick}\n      onKeyDown={handleOnKeyDown}\n      {...styles.container}\n      data-state={state}\n      data-testid=\"tag\"\n      {...restProps}\n    >\n      {!!beforeComponent && (\n        <Avatar\n          shape=\"square\"\n          size=\"2xSmall\"\n          {...beforeComponent.props}\n          {...styles.avatar}\n          data-testid=\"tag-avatar\"\n        />\n      )}\n      <tet.p\n        {...styles.label}\n        mr={\n          hasCloseButton\n            ? '$space-component-padding-xSmall'\n            : '$space-component-padding-small'\n        }\n        data-testid=\"tag-label\"\n      >\n        {label}\n      </tet.p>\n      {hasCloseButton && (\n        <IconButton\n          icon=\"20-close\"\n          variant=\"bare\"\n          onClick={handleOnCloseClick}\n          state={state}\n          {...styles.closeButton}\n          data-testid=\"tag-iconButton\"\n        />\n      )}\n    </tet.span>\n  );\n};\n","import { FC } from 'react';\n\nimport { Tag, TagProps } from '@/components/Tag';\nimport { SectionHeader } from '@/docs-components/common/SectionHeader.tsx';\nimport { States } from '@/docs-components/common/States.tsx';\nimport { tet } from '@/tetrisly';\n\nconst headers = ['Remove button: No', 'Remove button: Yes'] as const;\nconst labels = ['Before component: None', 'Before component: Avatar'];\nconst states = [':normal', ':selected', ':disabled'];\n\nconst RenderTag = ({\n  header,\n  label,\n  state,\n}: {\n  header: (typeof headers)[number];\n  label: (typeof labels)[number];\n  state: (typeof states)[number];\n}) => (\n  <tet.div flexBasis=\"120px\" flexGrow=\"1\" flexShrink=\"0\">\n    <Tag\n      label=\"Tag\"\n      state={state === ':normal' ? undefined : (state as TagProps['state'])}\n      onCloseClick={header === 'Remove button: Yes' ? () => null : undefined}\n      onClick={() => null}\n      beforeComponent={\n        label === 'Before component: Avatar'\n          ? {\n              type: 'Avatar',\n              props: { initials: 'A', appearance: 'blue', emphasis: 'high' },\n            }\n          : undefined\n      }\n    />\n  </tet.div>\n);\n\nexport const TagDocs: FC = () => (\n  <tet.div>\n    {headers.map((header) => (\n      <tet.section key={header} py=\"$dimension-500\">\n        <SectionHeader variant=\"H1\" as=\"h2\" py=\"$dimension-500\">\n          {header}\n        </SectionHeader>\n        {labels.map((label) => (\n          <tet.div px=\"$dimension-1000\" pb=\"$dimension-500\" key={label}>\n            <SectionHeader\n              variant=\"H2\"\n              as=\"h3\"\n              py=\"$dimension-500\"\n              labels={[label]}\n            />\n            <States states={states} flexBasis=\"120px\" gap=\"40\" />\n            <tet.div display=\"flex\" mt=\"40\" gap=\"$dimension-500\">\n              {states.map((state) => (\n                <RenderTag\n                  key={state}\n                  header={header}\n                  label={label}\n                  state={state.substring(1)}\n                />\n              ))}\n            </tet.div>\n          </tet.div>\n        ))}\n      </tet.section>\n    ))}\n  </tet.div>\n);\n"],"names":["backgroundColor","defaultConfig","stylesBuilder","custom","hasOnClick","hasOnClickStyles","label","closeButton","avatar","container","mergeConfigWithCustom","KEYBOARD_KEYS","Tag","state","beforeComponent","onClick","onCloseClick","restProps","hasCloseButton","styles","useMemo","containerRef","useRef","handleOnKeyDown","useCallback","e","handleOnCloseClick","jsxs","tet","jsx","Avatar","IconButton","headers","labels","states","RenderTag","header","TagDocs","SectionHeader","States"],"mappings":"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"}