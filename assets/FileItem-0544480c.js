import{j as t}from"./jsx-runtime-ffb262ed.js";import{m as b}from"./mergeConfigWithCustom-aec35d44.js";import{t as a}from"./TetrislyProvider-fe6220a9.js";import{B as y}from"./Button-2de68136.js";import{I as C}from"./Icon-d73ae0b2.js";import{I as j}from"./IconButton-d23d9973.js";const E=n=>n>=1099511627776?`${g(n/1099511627776)}TB`:n>=1073741824?`${g(n/1073741824)}GB`:n>=1048576?`${g(n/1048576)}MB`:n>=1024?`${g(n/1024)}KB`:`${g(n)}B`,q=(n,e)=>{const l=10**e;return Math.round((n+Number.EPSILON)*l)/l},g=n=>q(n,2),W=n=>{const[e,l]=n.split(","),[i,s]=e.split(";"),[,d]=i.split(":");if(l===void 0||d===void 0||(s==null?void 0:s.toLowerCase())!=="base64")throw new Error("Expected valid base64 encoded string");const c=atob(l),p=new Uint8Array(l.length);for(let u=0;u<c.length;u+=1)p[u]=c.charCodeAt(u);return new Blob([p],{type:d})},k={innerElements:{track:{h:"4px",borderRadius:"$border-radius-small"},notInvertedTrack:{backgroundColor:"$color-interaction-inverted-normal"},invertedTrack:{backgroundColor:"$color-interaction-neutral-subtle-normal"},progress:{h:"100%",borderRadius:"$border-radius-small",backgroundColor:"$color-interaction-default-normal"}}},V={defaultConfig:k},_=(n,e)=>{const{innerElements:l,...i}=b({defaultConfig:k,custom:n}),s=e?l.invertedTrack:l.notInvertedTrack;return{container:i,track:{...l.track,...s},progress:l.progress}},v=({custom:n,isInverted:e,progressPercentage:l=0})=>{const i=_(n,e);return t.jsx(a.div,{...i.container,children:t.jsx(a.div,{...i.track,children:t.jsx(a.div,{w:`${l}%`,...i.progress})})})};try{v.displayName="ProgressBar",v.__docgenInfo={description:"",displayName:"ProgressBar",props:{custom:{defaultValue:null,description:"",name:"custom",required:!1,type:{name:"ProgressBarConfig"}},isInverted:{defaultValue:null,description:"",name:"isInverted",required:!1,type:{name:"boolean"}},progressPercentage:{defaultValue:{value:"0"},description:"",name:"progressPercentage",required:!1,type:{name:"number"}}}}}catch{}const B={display:"flex",flexDirection:"column",gap:"$space-component-gap-xSmall",px:"$space-component-padding-large",py:"$space-component-padding-small",innerElements:{fileInfo:{display:"flex",alignItems:"center",gap:"$space-component-gap-small"},fileName:{text:"$typo-medium-175",color:"$color-content-primary"},fileSize:{text:"$typo-medium-175",color:"$color-content-secondary"},alertIcon:{color:"$color-content-negative-secondary"},content:{flexGrow:1,mx:"$space-component-padding-large"},uploadingContent:{},replaceableContent:{display:"flex",flexDirection:"column",alignItems:"flex-end"},alertContent:{display:"flex",flexDirection:"column",alignItems:"flex-end"},notExtendedAlert:{text:"$typo-body-small",color:"$color-content-negative-secondary"},closeIconButton:{display:"flex",flexDirection:"column",alignItems:"center"},progressBar:V.defaultConfig}},M={defaultConfig:B},S=n=>{const{innerElements:e,...l}=b({defaultConfig:B,custom:n});return{container:l,fileInfo:e.fileInfo,fileName:e.fileName,fileSize:e.fileSize,alertIcon:e.alertIcon,content:e.content,uploadingContent:e.uploadingContent,replaceableContent:e.replaceableContent,alertContent:e.alertContent,notExtendedAlert:e.notExtendedAlert,closeIconButton:e.closeIconButton,progressBar:e.progressBar}},h=({custom:n,state:e,file:l,isInverted:i,uploadedPercentage:s,alertText:d,onReplaceClick:c,onRetryClick:p,onCloseClick:u})=>{const r=S(n),m=E(l.size);return t.jsxs(a.div,{"data-testid":"file-item-compressed",...r.container,children:[t.jsxs(a.div,{...r.fileInfo,children:[e==="alert"&&t.jsx(C,{"data-testid":"alert-icon",name:"20-alert-fill",...r.alertIcon}),t.jsx(a.div,{"data-testid":"file-name",...r.fileName,children:l.name}),t.jsx(a.div,{"data-testid":"file-size",...r.fileSize,children:m}),t.jsxs(a.div,{...r.content,children:[e==="uploading"&&t.jsx(a.div,{"data-testid":"progress-bar",...r.uploadingContent,children:t.jsx(v,{custom:r.progressBar,isInverted:i,progressPercentage:s})}),e==="replaceable"&&c&&t.jsx(a.div,{...r.replaceableContent,children:t.jsx(y,{custom:{bare:{padding:0}},"data-testid":"replaceable-button",variant:"bare",appearance:"primary",label:"Replace",onClick:c})}),e==="alert"&&p&&t.jsx(a.div,{...r.alertContent,children:t.jsx(y,{custom:{bare:{padding:0}},"data-testid":"retry-button",intent:"destructive",variant:"bare",appearance:"primary",label:"Retry",onClick:p})})]}),t.jsx(a.div,{...r.closeIconButton,children:t.jsx(j,{"data-testid":"close-icon",icon:"20-close",variant:"bare",onClick:u})})]}),e==="alert"&&d!==void 0&&t.jsx(a.div,{"data-testid":"alert-text",...r.notExtendedAlert,children:d})]})};try{h.displayName="CompressedVariant",h.__docgenInfo={description:"",displayName:"CompressedVariant",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"alert"'},{value:'"uploading"'},{value:'"uploaded"'},{value:'"replaceable"'}]}},isInverted:{defaultValue:null,description:"",name:"isInverted",required:!1,type:{name:"boolean"}},uploadedPercentage:{defaultValue:null,description:"",name:"uploadedPercentage",required:!1,type:{name:"number"}},alertText:{defaultValue:null,description:"",name:"alertText",required:!1,type:{name:"string"}},onReplaceClick:{defaultValue:null,description:"",name:"onReplaceClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onRetryClick:{defaultValue:null,description:"",name:"onRetryClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onCloseClick:{defaultValue:null,description:"",name:"onCloseClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},custom:{defaultValue:null,description:"",name:"custom",required:!1,type:{name:"CompressedVariantConfig"}}}}}catch{}const T={display:"flex",flexDirection:"column",gap:"$space-component-gap-small",padding:"$space-component-padding-large",thumbnailWrapper:{display:"flex",flexDirection:"row",gap:"$space-component-gap-large"},fileDetails:{display:"flex",flexDirection:"column",gap:"$space-component-gap-xSmall",flexGrow:1},topDetails:{display:"flex",justifyContent:"space-between"},bottomDetails:{display:"flex",justifyContent:"space-between"},innerElements:{fileThumbnail:{paddingTop:"$space-component-padding-xSmall"},photoThumbnail:{paddingTop:"$space-component-padding-small"},fileDescription:{display:"flex",gap:"$space-component-gap-small",alignItems:"center"},fileName:{text:"$typo-medium-175",color:"$color-content-primary"},fileSize:{text:"$typo-medium-175",color:"$color-content-secondary"},timeLeft:{text:"$typo-medium-175",color:"$color-content-secondary"},dot:{w:"2px",h:"2px",backgroundColor:"$color-content-secondary"},uploadedPercentage:{text:"$typo-medium-175",color:"$color-content-secondary"},uploadingContent:{},replaceableContent:{display:"flex",flexDirection:"column",alignItems:"flex-end"},alertContent:{display:"flex",flexDirection:"column",alignItems:"flex-end"},closeIconButton:{display:"flex",flexDirection:"column",alignItems:"center"},alert:{display:"flex",gap:"$space-component-gap-small",alignItems:"center"},alertText:{display:"flex",gap:"$space-component-gap-xSmall",text:"$typo-body-small",color:"$color-content-negative-secondary"},alertIcon:{color:"$color-content-negative-secondary"},fileSizeAlert:{text:"$typo-body-small",color:"$color-content-secondary"},progressBar:V.defaultConfig}},D={defaultConfig:T},L=n=>{const{innerElements:e,thumbnailWrapper:l,fileDetails:i,topDetails:s,bottomDetails:d,...c}=b({defaultConfig:T,custom:n});return{container:c,thumbnailWrapper:l,fileDetails:i,topDetails:s,bottomDetails:d,fileThumbnail:e.fileThumbnail,photoThumbnail:e.photoThumbnail,fileDescription:e.fileDescription,fileName:e.fileName,fileSize:e.fileSize,timeLeft:e.timeLeft,dot:e.dot,uploadedPercentage:e.uploadedPercentage,uploadingContent:e.uploadingContent,replaceableContent:e.replaceableContent,alertContent:e.alertContent,closeIconButton:e.closeIconButton,alert:e.alert,alertText:e.alertText,alertIcon:e.alertIcon,fileSizeAlert:e.fileSizeAlert,progressBar:e.progressBar}},$=({custom:n,state:e,file:l,isInverted:i,thumbnail:s,uploadedPercentage:d,timeLeftText:c,alertText:p,onReplaceClick:u,onRetryClick:r,onCloseClick:m})=>{const o=L(n),f=E(l.size);return t.jsxs(a.div,{"data-testid":"file-item-extended",...o.container,children:[t.jsxs(a.div,{...o.thumbnailWrapper,children:[s==="file"&&t.jsx(a.div,{"data-testid":"thumbnail-file",...o.fileThumbnail,children:t.jsx(C,{name:"20-file"})}),s==="photo"&&t.jsx(a.div,{"data-testid":"thumbnail-photo",...o.photoThumbnail,children:t.jsx("img",{src:URL.createObjectURL(l),alt:l.name})}),t.jsxs(a.div,{...o.fileDetails,children:[t.jsxs(a.div,{...o.topDetails,children:[t.jsx(a.div,{...o.fileName,children:l.name}),t.jsxs(a.div,{display:"flex",gap:"$space-component-gap-large",alignItems:"center",children:[e==="replaceable"&&u&&t.jsx(a.div,{...o.replaceableContent,children:t.jsx(y,{"data-testid":"replaceable-button",custom:{bare:{padding:0}},variant:"bare",appearance:"primary",label:"Replace",onClick:u})}),e==="alert"&&r&&t.jsx(a.div,{...o.alertContent,children:t.jsx(y,{"data-testid":"retry-button",custom:{bare:{padding:0}},intent:"destructive",variant:"bare",appearance:"primary",label:"Retry",onClick:r})}),t.jsx(a.div,{...o.closeIconButton,children:t.jsx(j,{"data-testid":"close-icon",icon:"20-close",variant:"bare",onClick:m})})]})]}),t.jsxs(a.div,{...o.bottomDetails,children:[t.jsxs(a.div,{...o.fileDescription,children:[e!=="alert"&&t.jsx(a.span,{"data-testid":"file-size",...o.fileSize,children:f}),e==="uploading"&&c!==void 0&&t.jsxs(t.Fragment,{children:[t.jsx(a.span,{...o.dot}),t.jsx(a.span,{"data-testid":"uploading-time-left",...o.timeLeft,children:c})]})]}),e==="uploading"&&d!==void 0&&t.jsxs(a.div,{"data-testid":"uploaded-percentage",...o.uploadedPercentage,children:[d,"%"]})]}),e==="alert"&&t.jsxs(a.div,{"data-testid":"alert-info",...o.alert,children:[p!==void 0&&t.jsxs(t.Fragment,{children:[t.jsxs(a.div,{...o.alertText,children:[t.jsx(C,{name:"16-alert-full",...o.alertIcon}),t.jsx(a.span,{children:p})]}),t.jsx(a.span,{...o.dot})]}),t.jsx(a.span,{"data-testid":"alert-file-size",...o.fileSizeAlert,children:f})]})]})]}),e==="uploading"&&t.jsx(v,{custom:o.progressBar,isInverted:i,progressPercentage:d})]})};try{$.displayName="ExtendedVariant",$.__docgenInfo={description:"",displayName:"ExtendedVariant",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"alert"'},{value:'"uploading"'},{value:'"uploaded"'},{value:'"replaceable"'}]}},isInverted:{defaultValue:null,description:"",name:"isInverted",required:!1,type:{name:"boolean"}},uploadedPercentage:{defaultValue:null,description:"",name:"uploadedPercentage",required:!1,type:{name:"number"}},alertText:{defaultValue:null,description:"",name:"alertText",required:!1,type:{name:"string"}},onReplaceClick:{defaultValue:null,description:"",name:"onReplaceClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onRetryClick:{defaultValue:null,description:"",name:"onRetryClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onCloseClick:{defaultValue:null,description:"",name:"onCloseClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},custom:{defaultValue:null,description:"",name:"custom",required:!1,type:{name:"ExtendedVariantConfig"}},thumbnail:{defaultValue:null,description:"",name:"thumbnail",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"file"'},{value:'"photo"'}]}},timeLeftText:{defaultValue:null,description:"",name:"timeLeftText",required:!1,type:{name:"string"}}}}}catch{}const x={state:"uploading",isInverted:!1,isExtended:!1,thumbnail:"none"},z={display:"flex",flexDirection:"column",gap:"$space-component-gap-small",borderRadius:"$border-radius-large",state:{uploading:{backgroundColor:"$color-interaction-neutral-subtle-normal"},uploaded:{backgroundColor:"$color-interaction-default-subtle-normal"},replaceable:{backgroundColor:"$color-interaction-default-subtle-normal"},alert:{backgroundColor:"$color-interaction-alert-subtle-normal"}},inverted:{backgroundColor:"$color-interaction-background-formField",borderWidth:"$border-width-small",borderStyle:"$border-style-solid",borderColor:"$color-interaction-border-neutral-normal"},invertedAlert:{borderColor:"$color-interaction-border-alert"},compressed:M.defaultConfig,extended:D.defaultConfig},P=n=>{const{state:e,inverted:l,invertedAlert:i,compressed:s,extended:d,...c}=b({defaultConfig:z,custom:n.custom}),p=e[n.state??x.state],u=n.isInverted?l:{},r=n.state==="alert"&&n.isInverted?i:{};return{container:{...c,...p,...u,...r},compressed:s,extended:d}},I=n=>{const{file:e,state:l=x.state,isInverted:i=x.isInverted,isExtended:s=x.isExtended,thumbnail:d=x.thumbnail,uploadedPercentage:c,timeLeftText:p,alertText:u,onReplaceClick:r,onRetryClick:m,onCloseClick:o}=n,f=P(n);return t.jsxs(a.div,{"data-testid":"file-item",...f.container,children:[!s&&t.jsx(h,{custom:f.compressed,state:l,file:e,isInverted:i,uploadedPercentage:c,alertText:u,onReplaceClick:r,onRetryClick:m,onCloseClick:o}),s&&t.jsx($,{custom:f.extended,state:l,file:e,isInverted:i,thumbnail:d,uploadedPercentage:c,timeLeftText:p,alertText:u,onReplaceClick:r,onRetryClick:m,onCloseClick:o})]})};try{I.displayName="FileItem",I.__docgenInfo={description:"",displayName:"FileItem",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"enum",value:[{value:'"alert"'},{value:'"uploading"'},{value:'"uploaded"'},{value:'"replaceable"'}]}},isInverted:{defaultValue:null,description:"",name:"isInverted",required:!1,type:{name:"boolean"}},uploadedPercentage:{defaultValue:null,description:"",name:"uploadedPercentage",required:!1,type:{name:"number"}},alertText:{defaultValue:null,description:"",name:"alertText",required:!1,type:{name:"string"}},onReplaceClick:{defaultValue:null,description:"",name:"onReplaceClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onRetryClick:{defaultValue:null,description:"",name:"onRetryClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},onCloseClick:{defaultValue:null,description:"",name:"onCloseClick",required:!1,type:{name:"((e?: MouseEvent<HTMLButtonElement, MouseEvent>) => void)"}},custom:{defaultValue:null,description:"",name:"custom",required:!1,type:{name:"FileItemConfig"}},isExtended:{defaultValue:null,description:"",name:"isExtended",required:!1,type:{name:"boolean"}},thumbnail:{defaultValue:null,description:"",name:"thumbnail",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"file"'},{value:'"photo"'}]}},timeLeftText:{defaultValue:null,description:"",name:"timeLeftText",required:!1,type:{name:"string"}}}}}catch{}export{I as F,W as b};
